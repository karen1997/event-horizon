{% include 'templates/user.html' %}
<!DOCTYPE html>
<html>
  <head>
    <title>Map Events</title>
    <h1><a href='/home' style="color:white; text-decoration: none">The Event Horizon</a> </h1>
    <p><!--if the user is "viewed as guest", my profiles, saved events, and logout would not work-->
        <a href="/form" id='menutab' style="text-decoration: none">New Event</a>
        <a href="/my_profile" id='menutab' style="text-decoration: none">My Profile</a>
        <a href="/saved" id='menutab' style="text-decoration: none">Saved Events</a>
        <a href="/map" id='menutab' style="background-color: rgba(105, 77, 105, 0.5);text-decoration: none">Map Events</a>

    </p>
    <br>
    <link rel="stylesheet" type="text/css" href="/static/map.css">
    <br>
    <style>
      #map-canvas {
        width: 800px;
        height: 700px;
        margin-left: 300px;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script>
      function initialize() {
        var mapCanvas = document.getElementById('map-canvas');
        var mapOptions = {
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(mapCanvas, mapOptions)

        // Try HTML5 geolocation
        if(navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = new google.maps.LatLng(position.coords.latitude,
                                             position.coords.longitude);

            var infowindow = new google.maps.InfoWindow({
              map: map,
              position: pos,
              content: 'Location found using HTML5.'
            });

            map.setCenter(pos);
          }, function() {
            handleNoGeolocation(true);
          });
        } else {
          // Browser doesn't support Geolocation
          handleNoGeolocation(false);
        }

      }

      function handleNoGeolocation(errorFlag) {
        if (errorFlag) {
          var content = 'Error: The Geolocation service failed.';
        } else {
          var content = 'Error: Your browser doesn\'t support geolocation.';
        }

        var options = {
          map: map,
          position: new google.maps.LatLng(60, 105),
          content: content
        };

        var infowindow = new google.maps.InfoWindow(options);
        map.setCenter(options.position);
      }
      
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
  </body>
  <footer>
    Copyright
    <br> (c) Karen Dorvil, Romeo Umana, & Rainbow (Laan) Yeung, 2015.
    <a href='/about'>About</a>
  </footer>
</html>

<!-- reference: https://developers.google.com/maps/tutorials/fundamentals/adding-a-google-map -->
